

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>yatsm.algorithms.postprocess module &mdash; YATSM 0.7.dev0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="YATSM 0.7.dev0 documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> YATSM
          

          
          </a>

          
            
            
              <div class="version">
                0.7.dev0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../guide/install.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cli/scripts.html">Command Line Utilities</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">YATSM</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>yatsm.algorithms.postprocess module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/ceholden/yatsm/blob/master/docs/yatsm/yatsm.algorithms.postprocess.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-yatsm.algorithms.postprocess">
<span id="yatsm-algorithms-postprocess-module"></span><h1>yatsm.algorithms.postprocess module<a class="headerlink" href="#module-yatsm.algorithms.postprocess" title="Permalink to this headline">¶</a></h1>
<p>Result post-processing utilities</p>
<p>Includes comission and omission tests and robust linear model result
calculations</p>
<dl class="function">
<dt id="yatsm.algorithms.postprocess.commission_test">
<code class="descclassname">yatsm.algorithms.postprocess.</code><code class="descname">commission_test</code><span class="sig-paren">(</span><em>yatsm</em>, <em>alpha=0.1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/yatsm/algorithms/postprocess.html#commission_test"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yatsm.algorithms.postprocess.commission_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge adjacent records based on Chow Tests for nested models</p>
<p>Use Chow Test to find false positive, spurious, or unnecessary breaks
in the timeseries by comparing the effectiveness of two separate
adjacent models with one single model that spans the entire time
period.</p>
<p>Chow test is described:</p>
<div class="math">
\[\frac{[RSS_r - (RSS_1 + RSS_2)] / k}{(RSS_1 + RSS_2) / (n - 2k)}\]</div>
<p>where:</p>
<blockquote>
<div><ul class="simple">
<li><span class="math">\(RSS_r\)</span> is the RSS of the combined, or, restricted model</li>
<li><span class="math">\(RSS_1\)</span> is the RSS of the first model</li>
<li><span class="math">\(RSS_2\)</span> is the RSS of the second model</li>
<li><span class="math">\(k\)</span> is the number of model parameters</li>
<li><span class="math">\(n\)</span> is the number of total observations</li>
</ul>
</div></blockquote>
<p>Because we look for change in multiple bands, the RSS used to compare
the unrestricted versus restricted models is the mean RSS
values from all <code class="docutils literal"><span class="pre">model.test_indices</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><span class="target" id="yatsm.algorithms.postprocess.commission_test.params.yatsm"></span><strong>yatsm</strong><a class="paramlink headerlink reference internal" href="#yatsm.algorithms.postprocess.commission_test.params.yatsm">¶</a> &#8211; fitted YATSM model to check for commission errors</li>
<li><span class="target" id="yatsm.algorithms.postprocess.commission_test.params.alpha"></span><strong>alpha</strong><a class="paramlink headerlink reference internal" href="#yatsm.algorithms.postprocess.commission_test.params.alpha">¶</a> &#8211; significance level for F-statistic (default: 0.10)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>updated copy of <code class="docutils literal"><span class="pre">yatsm.record</span></code> with spurious models</dt>
<dd><p class="first last">combined into unified model</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="yatsm.algorithms.postprocess.date2index">
<code class="descclassname">yatsm.algorithms.postprocess.</code><code class="descname">date2index</code><span class="sig-paren">(</span><em>dates</em>, <em>d</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/yatsm/algorithms/postprocess.html#date2index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yatsm.algorithms.postprocess.date2index" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns index of sorted array <cite>dates</cite> containing the date <cite>d</cite>
:param _sphinx_paramlinks_yatsm.algorithms.postprocess.date2index.dates: array of dates (or numbers really) in sorted order
:type dates: np.ndarray
:param _sphinx_paramlinks_yatsm.algorithms.postprocess.date2index.d: number to search for
:type d: int, float</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">index of <cite>dates</cite> containing value <cite>d</cite></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/dev/library/functions.html#int" title="(in Python v3.7)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="yatsm.algorithms.postprocess.omission_test">
<code class="descclassname">yatsm.algorithms.postprocess.</code><code class="descname">omission_test</code><span class="sig-paren">(</span><em>model</em>, <em>crit=0.05</em>, <em>behavior='ANY'</em>, <em>indices=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/yatsm/algorithms/postprocess.html#omission_test"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yatsm.algorithms.postprocess.omission_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Add omitted breakpoint into records based on residual stationarity</p>
<p>Uses recursive residuals within a CUMSUM test to check if each model
has omitted a &#8220;structural change&#8221; (e.g., land cover change). Returns
an array of True or False for each timeseries segment record depending
on result from <cite>statsmodels.stats.diagnostic.breaks_cusumolsresid</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><span class="target" id="yatsm.algorithms.postprocess.omission_test.params.crit"></span><strong>crit</strong><a class="paramlink headerlink reference internal" href="#yatsm.algorithms.postprocess.omission_test.params.crit">¶</a> &#8211; Critical p-value for rejection of null
hypothesis that data contain no structural change</li>
<li><span class="target" id="yatsm.algorithms.postprocess.omission_test.params.behavior"></span><strong>behavior</strong><a class="paramlink headerlink reference internal" href="#yatsm.algorithms.postprocess.omission_test.params.behavior">¶</a> &#8211; Method for dealing with multiple
<cite>test_indices</cite>. <cite>ANY</cite> will return True if any one test index
rejects the null hypothesis. <cite>ALL</cite> will only return True if ALL
test indices reject the null hypothesis.</li>
<li><span class="target" id="yatsm.algorithms.postprocess.omission_test.params.indices"></span><strong>indices</strong><a class="paramlink headerlink reference internal" href="#yatsm.algorithms.postprocess.omission_test.params.indices">¶</a> &#8211; Array indices to test. User provided
indices must be a subset of <cite>model.test_indices</cite>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>Array of True or False for each record where</dt>
<dd><p class="first last">True indicates omitted break point</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="yatsm.algorithms.postprocess.refit_record">
<code class="descclassname">yatsm.algorithms.postprocess.</code><code class="descname">refit_record</code><span class="sig-paren">(</span><em>model</em>, <em>prefix</em>, <em>estimator</em>, <em>fitopt=None</em>, <em>keep_regularized=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/yatsm/algorithms/postprocess.html#refit_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#yatsm.algorithms.postprocess.refit_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Refit YATSM model segments with a new estimator and update record</p>
<p>YATSM class model must be ran and contain at least one record before this
function is called.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><span class="target" id="yatsm.algorithms.postprocess.refit_record.params.model"></span><strong>model</strong><a class="paramlink headerlink reference internal" href="#yatsm.algorithms.postprocess.refit_record.params.model">¶</a> &#8211; YATSM model to refit</li>
<li><span class="target" id="yatsm.algorithms.postprocess.refit_record.params.prefix"></span><strong>prefix</strong><a class="paramlink headerlink reference internal" href="#yatsm.algorithms.postprocess.refit_record.params.prefix">¶</a> &#8211; prefix for refitted coefficient and RMSE (don&#8217;t include
underscore as it will be added)</li>
<li><span class="target" id="yatsm.algorithms.postprocess.refit_record.params.estimator"></span><strong>estimator</strong><a class="paramlink headerlink reference internal" href="#yatsm.algorithms.postprocess.refit_record.params.estimator">¶</a> &#8211; instance of a scikit-learn compatible estimator
object</li>
<li><span class="target" id="yatsm.algorithms.postprocess.refit_record.params.fitopt"></span><strong>fitopt</strong><a class="paramlink headerlink reference internal" href="#yatsm.algorithms.postprocess.refit_record.params.fitopt">¶</a> &#8211; dict of options for the <code class="docutils literal"><span class="pre">fit</span></code> method of the
<code class="docutils literal"><span class="pre">estimator</span></code> provided (default: None)</li>
<li><span class="target" id="yatsm.algorithms.postprocess.refit_record.params.keep_regularized"></span><strong>keep_regularized</strong><a class="paramlink headerlink reference internal" href="#yatsm.algorithms.postprocess.refit_record.params.keep_regularized">¶</a> &#8211; do not use features with coefficient
estimates that are fit to 0 (i.e., if using L1 regularization)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>updated model.record NumPy structured array with refitted</dt>
<dd><p class="first last">coefficients and RMSE</p>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.array</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014 - 2017, Chris Holden.
      Last updated on Mar 23, 2017, 2:41:34 AM.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.7.dev0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>